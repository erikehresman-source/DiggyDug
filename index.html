<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="icon" href="icons/icon-192.png">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <title>Dig Dug: Cavern Quest</title>
  <link rel="stylesheet" href="css/styles.css">
  <script defer type="module" src="js/main.js"></script>
</head>
<body>
  <header>
    <h1>Dig Dug: Cavern Quest</h1>
    <div class="controls">
      <button id="btnPause" title="Pause/Resume">â¯</button>
      <button id="btnRestart" title="Restart level">âŸ²</button>
      <button id="btnPump" title="Pump (Space / Tap)">ğŸª </button>
      <button id="btnMenu" title="Menu">â˜°</button>
      <button id="btnExport" title="Export Save">â¬‡ï¸ Save</button>
      <input type="file" id="importFile" accept="application/json">
      <label for="importFile" class="filelabel" title="Import Save">â¬†ï¸ Load</label>
      <span id="hud"></span>
    </div>
  </header>
  <main>
    <div id="loader" class="loader"><div id="bar"></div><span id="pct">0%</span></div>
    <canvas id="game" tabindex="0" aria-label="Game canvas"></canvas>
    <div class="touchpad">
      <button data-dir="left">â—€ï¸</button>
      <div class="v">
        <button data-dir="up">â–²</button>
        <button data-dir="down">â–¼</button>
      </div>
      <button data-dir="right">â–¶ï¸</button>
      <button id="btnPumpTouch" class="pump">ğŸª </button>
    </div>
  </main>

  <dialog id="menu">
    <form method="dialog">
      <h2>Menu</h2>
      <section>
        <h3>World</h3>
        <select id="worldSelect">
          <option value="./js/game/levels_classic.js">Classic</option>
          <option value="./js/game/levels_caves.js">Caves</option>
          <option value="./js/game/levels_ice.js">Ice</option>
        </select>
      </section>
      <section>
        <h3>Settings</h3>
        <label><input type="checkbox" id="optSound" checked> Sound</label><br>
        <label><input type="checkbox" id="optLefty"> Leftâ€‘handed Dâ€‘pad</label><br>
        <label>Difficulty
          <select id="optDiff">
            <option value="0">Chill</option>
            <option value="1" selected>Normal</option>
            <option value="2">Hard</option>
          </select>
        </label>
      </section>
      <section>
        <h3>High Scores</h3>
        <ol id="scores"></ol>
        <button id="btnResetScores" type="button">Reset Scores</button>
      </section>
      <section>
        <h3>Unlocks</h3>
        <div id="unlockInfo">Treasures collected: <span id="treasureCount">0</span></div>
      </section>
      <menu>
        <button value="cancel">Close</button>
      </menu>
    </form>
  </dialog>

  <footer>
    <small>Offline-ready PWA. Dig tunnels, trap monsters, collect treasures. Tap ğŸª  or press Space to pump.</small>
  </footer>
</body>
</html>
